BGJZ_App.controller("adminCtrl",["$scope","$rootScope","$http","$cookies",function(t,e,a,l){a({method:"GET",url:e.path+"users/current"}).then(function(e){t.adminData=e.data.Users[0]},function(t){console.log(t)}),t.loginOut=function(){a({method:"DELETE",url:e.path+"users/login"}).success(function(t){l.remove("bgjz",{path:"/"}),alert("已退出当前用户"),location.href="/"}).error(function(t){console.log(t)})}}]),BGJZ_App.controller("openList",["$scope","$rootScope","$http",function(t,e,a){t.listTitle=["开班编号","课程名字","招生简章","课程表","课时","学费","开班时间","考试时间","班级容量","本店报名","报名状态"],a({method:"GET",url:e.path+"courses"}).then(function(e){console.log(e),t.listData=e.data.courses},function(t){console.log(t)})}]),BGJZ_App.controller("apply",["$scope","$rootScope","$location","$http",function(t,e,a,l){t.classhour={testtype:"新考"},t.card_test=function(e,a){t.birthDateVal="",t.sexVal="",a.minlength||a.required||18==e.length&&(t.birthDateVal=e.substring(6,10)+"-"+e.substring(10,12)+"-"+e.substring(12,14),1==parseInt(e.substring(16,17)%2)?t.sexVal="男":t.sexVal="女")},t.applySubmit=function(o){console.log(t.classhour),console.log(o.$valid),angular.forEach(o.$error.required,function(t,e){o[t.$name].$setDirty()}),o.$valid&&l({method:"POST",url:e.path+"student",data:t.classhour}).then(function(t){console.log(t),a.path("/info")},function(t){console.log(t)})}}]),BGJZ_App.controller("infoList",["$scope",function(t){t.readOnlyBtn=!0}]),BGJZ_App.controller("studentsList",["$scope","$http","$rootScope",function(t,e,a){t.studentsListTit=["学员编号","姓名","身份证号","联系电话","报名课程","入学时间","考试时间","状态","操作"],e({method:"GET",url:a.path+"student"}).then(function(e){t.studentsListData=e.data.courses,console.log(t.studentsListData)},function(t){console.log(t)})}]),BGJZ_App.controller("onlineCourses",["$scope","$rootScope","$http",function(t,e,a){a({method:"GET",url:e.path+"getcourses"}).success(function(e){console.log(e),t.studentData=e.courses}).error(function(t){})}]),BGJZ_App.controller("learning",["$scope","$rootScope","$http","$stateParams",function(t,e,a,l){console.log(l)}]);var mainControllers=angular.module("mainControllers",[]);mainControllers.controller("loginCtrl",["$scope","$state","$window","loginService",function(t,e,a,l){t.loginTitle="佰工家政后台登录",t.loginData={username:"",password:""},t.tipData={state:!1,data:"用户名或者密码错误！",tipShowTime:2e3}}]),mainControllers.controller("listCtrl",["$scope","$state",function(t,e){}]),mainControllers.controller("navCtrl",["$scope",function(t){t.navItem=[{name:"门店管理",link:"list.store"},{name:"账号管理",link:"list.account"},{name:"开班管理",link:"list.course"},{name:"学员管理",link:"list.student"},{name:"网络课程管理",link:"list.classHour"}]}]),mainControllers.controller("storeCtrl",["$scope","globaleService",function(t,e){t.tableData={title:"门店列表",theader:["门店列表","门店名称","电话","地址","	操作"],tbody:[]},t.data={size:10,page:0},t.settings={method:"get",url:"/admin/stores",data:t.data},t.refresh=function(){e.ajaxData(t.settings).then(function(e){t.count=e.count,t.tableData.tbody=e.stores},function(t){console.log(t)})},t.refresh()}]),mainControllers.controller("storeEditCtrl",["$scope","$stateParams","globaleService",function(t,e,a){t.editData={label:[{labelFor:"no",labelName:"门店编号",inputModel:""},{labelFor:"name",labelName:"门店名称",inputModel:""},{labelFor:"address",labelName:"地址",inputModel:""},{labelFor:"tel",labelName:"电话",inputModel:""},{labelFor:"manager",labelName:"负责人",inputModel:""},{labelFor:"managerTel",labelName:"负责人手机",inputModel:""}]},t.urls={getSettings:{method:"get",url:"/admin/stores/"+e.id,data:""},postUrl:"/admin/stores",putUrl:"/admin/stores/"+e.id},t.settings={method:"get",url:t.urls.getUrl,data:""},0!=e.id&&a.ajaxData(t.urls.getSettings).then(function(e){$.each(t.editData.label,function(t,a){$.each(e.stores[0],function(t,e){a.labelFor==t&&(a.inputModel=e)})})},function(t){console.log(t)})}]),mainControllers.controller("accountCtrl",["$scope","globaleService",function(t,e){t.tableData={title:"账号列表",theader:["登录账号（手机号）","姓名","所属门店","职位","状态","操作"],tbody:[]},t.data={size:10,page:0},t.settings={method:"get",url:"/admin/users",data:t.data},t.refresh=function(){e.ajaxData(t.settings).then(function(e){t.count=e.count,t.tableData.tbody=e.users},function(t){console.log(t)})},t.refresh()}]),mainControllers.controller("accounEditCtrl",["$scope","$stateParams","globaleService","tipService",function(t,e,a,l){t.editData={label:[{labelFor:"username",labelName:"登录账号",type:"text",inputModel:""},{labelFor:"name",labelName:"姓名",type:"text",inputModel:""},{labelFor:"storeid",labelName:"所属门店",type:"select",inputModel:"",dataType:"int"},{labelFor:"position",labelName:"职位",type:"text",inputModel:""},{labelFor:"password",labelName:"密码",type:"password",inputModel:""},{labelFor:"confirm",labelName:"确认密码",type:"password",inputModel:""}],selectOptions:[]},t.urls={getSettings:{method:"get",url:"/admin/users/"+e.id,data:""},postUrl:"/admin/users",putUrl:"/admin/users/"+e.id,getSelectSettings:{method:"get",url:"/admin/stores",data:""}},a.ajaxData(t.urls.getSelectSettings).then(function(e){$.each(e.stores,function(e,a){t.editData.selectOptions[e]={value:a.id,name:a.name}})},function(t){l.setMessage("数据读取出错","danger")}),0!=e.id&&a.ajaxData(t.urls.getSettings).then(function(e){$.each(t.editData.label,function(t,a){$.each(e.users[0],function(t,e){a.labelFor==t&&(a.inputModel=e)})})},function(t){l.setMessage("数据读取出错","danger")})}]),mainControllers.controller("courseCtrl",["$scope","globaleService",function(t,e){t.tableData={title:"开班列表",theader:["课程名字","学费","课时","班级容量","开课时间","报考职位","报考等级","招生简章","课程表","考试时间","报名截止日期","操作"],tbody:[]},t.data={size:10,page:0},t.settings={method:"get",url:"/admin/courses",data:t.data},t.refresh=function(){e.ajaxData(t.settings).then(function(e){t.count=e.count,t.tableData.tbody=e.courses},function(t){console.log(t)})},t.refresh()}]),mainControllers.controller("courseEditCtrl",["$scope","$stateParams","$filter","globaleService",function(t,e,a,l){t.editData={label:[{labelFor:"name",labelName:"课程名字",inputModel:"",type:"text",dataType:"string",filter:"textfilter"},{labelFor:"price",labelName:"学费",inputModel:"",type:"text",dataType:"int",filter:"textfilter"},{labelFor:"classhourday",labelName:"课时",inputModel:"",type:"text",dataType:"int",filter:"textfilter"},{labelFor:"capcity",labelName:"班级容量",inputModel:"",type:"text",dataType:"int",filter:"textfilter"},{labelFor:"start",labelName:"开课时间",inputModel:"",type:"text",dataType:"int",filter:"datefilter"},{labelFor:"position",labelName:"报考职位",inputModel:"",type:"text",dataType:"string",filter:"textfilter"},{labelFor:"level",labelName:"报考等级",inputModel:"",type:"text",dataType:"int",filter:"textfilter"},{labelFor:"rule",labelName:"招生简章",inputModel:"",type:"file",dataType:"string",filter:"filefilter"},{labelFor:"list",labelName:"课程表",inputModel:"",type:"file",dataType:"string",filter:"filefilter"},{labelFor:"testTime",labelName:"考试时间",inputModel:"",type:"int",dataType:"int",filter:"datefilter"},{labelFor:"deadline",labelName:"报名截止日期",inputModel:"",type:"text",dataType:"int",filter:"datefilter"}]},t.urls={getSetting:{method:"get",url:"/admin/courses/"+e.id},postUrl:"/admin/courses",putUrl:"/admin/courses/"+e.id},0!=e.id&&l.ajaxData(t.urls.getSetting).then(function(e){$.each(t.editData.label,function(t,l){$.each(e.courses[0],function(t,e){l.labelFor==t&&("datefilter"==l.filter?l.inputModel=a("date")(1e3*e,"yyyy-MM-dd"):l.inputModel=e)})})},function(t){console.log(t)})}]),mainControllers.controller("studentCtrl",["$scope","globaleService",function(t,e){t.tableData={title:"学员列表",theader:["学员编号","姓名","联系电话","来源门店","报名课程","入学时间","考试时间","状态","操作"],tbody:[]},t.data={size:10,page:0},t.settings={method:"get",url:"/admin/studentmanage",data:t.data},t.refresh=function(){e.ajaxData(t.settings).then(function(e){t.count=e.count,t.tableData.tbody=e.student})},t.refresh()}]),mainControllers.controller("studentEditCtrl",["$scope","$stateParams","globaleService",function(t,e,a){t.editData={label:[{labelFor:"name",labelName:"学员姓名",type:"text",inputModel:""},{labelFor:"tel",labelName:"联系电话",type:"text",inputModel:""},{labelFor:"no",labelName:"来源门店",type:"text",inputModel:"",dataType:"int"},{labelFor:"coursesname",labelName:"报名课程",type:"text",inputModel:""},{labelFor:"start",labelName:"入学时间",type:"text",inputModel:""},{labelFor:"testTime",labelName:"考试时间",type:"text",inputModel:""},{labelFor:"state",labelName:"状态",type:"text",inputModel:""}],selectOptions:[]},t.settings={method:"get",url:"/admin/student/"+e.id,data:""},0!=e.id&&a.ajaxData(t.settings).then(function(e){$.each(t.editData.label,function(t,a){$.each(e.student[0],function(t,e){a.labelFor==t&&(a.inputModel=e)})})},function(t){tipService.setMessage("数据读取出错","danger")})}]),mainControllers.controller("classHourCtrl",["$scope","globaleService","tipService",function(t,e,a){t.tableData={title:"网络课程列表",theader:["课程编号","课程名字","课时数","教学视频","课件资料","操作"],tbody:[]},t.data={size:10,page:0},t.settings={method:"get",url:"/admin/classhour",data:t.data},t.refresh=function(){e.ajaxData(t.settings).then(function(e){t.count=e.count,t.tableData.tbody=e.classhour})},t.refresh(),t.sortDown=function(t){e.ajaxData({method:"put",url:"/admin/classhour/"+t+"/sortdown",data:""}).then(function(t){a.setMessage("下移成功","success")},function(t){a.setMessage("下移失败","danger")})},t.sordUp=function(t){e.ajaxData({method:"put",url:"/admin/classhour/"+t+"/sortup",data:""}).then(function(t){a.setMessage("上移成功","success")},function(t){a.setMessage("上移失败","danger")})},t["delete"]=function(t){e.ajaxData({method:"delete",url:"/admin/classhour/"+t+"/delete",data:""}).then(function(t){console.log(t)},function(t){console.log(t)})}}]),mainControllers.controller("classHourEditCtrl",["$scope","$stateParams","globaleService",function(t,e,a){t.editData={label:[{labelFor:"courseID",labelName:"课程编号",inputModel:"",type:"text",dataType:"int"},{labelFor:"name",labelName:"课程名字",inputModel:"",type:"text",dataType:"string"},{labelFor:"number",labelName:"课时数",inputModel:"",type:"text",dataType:"int"},{labelFor:"video",labelName:"教学视频",inputModel:"",type:"file",dataType:"string"},{labelFor:"data",labelName:"课件资料",inputModel:"",type:"file",dataType:"string"}]},t.urls={getSetting:{method:"get",url:"/admin/classhour/"+e.id},postUrl:"/admin/classhour",putUrl:"/admin/classhour/"+e.id},0!=e.id&&a.ajaxData(t.urls.getSetting).then(function(e){$.each(t.editData.label,function(t,a){$.each(e.classhour[0],function(t,e){a.labelFor==t&&(a.inputModel=e)})})},function(t){console.log(t)})}]);