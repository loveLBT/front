var mainServices=angular.module("mainServices",[]);mainServices.factory("globaleService",["$http","$q","$window","$timeout","$state",function(e,t,r,a,n){var i={};return i.ajaxData=function(a){var i=t.defer();return e({method:a.method,url:apiUrl+a.url,params:a.data,data:a.data,dataType:"json",headers:{Authorization:r.sessionStorage.token}}).success(function(e,t){i.resolve(e)}).error(function(e,t){401==t&&(r.sessionStorage.token="",n.go("login")),i.reject(e)}),i.promise},i.upload=function(e,a){this.files=e,this.formdata=new FormData,this.formdata.append("file",e);var n=t.defer();return $.ajax({type:"post",data:this.formdata,url:apiUrl+a,contentType:!1,processData:!1,headers:{Authorization:r.sessionStorage.token}}).success(function(e,t){n.resolve(e)}).error(function(e,t){n.reject(e)}),n.promise},i}]),mainServices.factory("tipService",["$timeout",function(e){var t={message:null,type:null,state:!1};return t.setMessage=function(t,r){this.message=t,this.type=r,this.state=!0,a&&e.cancel(a);var a=e(function(){this.state=!1}.bind(this),3e3)},t}]),mainServices.factory("loadingService",["$timeout",function(e){var t={state:!1};return t.setLoading=function(){this.state=!0,t&&e.cancel(t);var t=e(function(){this.state=!1}.bind(this),3e3)},t}]),mainServices.factory("sureService",["$timeout",function(e){var t={};return t.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.hasPwd=function(e){return!(!e.password&&!e.confirm)},t}]),mainServices.factory("loginService",["$http","$q",function(e,t){var r={};return r.sub=function(r){var a=t.defer();return e({method:"post",url:apiUrl+"/admin/login",data:r}).success(function(e,t,r){a.resolve(e)}).error(function(e,t){var r={};r.data=e.message,r.state=t,a.reject(r)}),a.promise},r}]),mainServices.factory("dateService",["$http","$q",function(e,t){var r={};return r.getUnix=function(e){var t=e.replace(/-/g,"/"),r=new Date(t),a=r.getTime().toString();return a.substr(0,10)},r}]);